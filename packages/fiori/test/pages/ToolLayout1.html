<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Side Navigation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<script data-ui5-config type="application/json">
		{
			"rtl": false
		}
	</script>
	<script src="%VITE_BUNDLE_PATH%" type="module"></script>
	<link rel="stylesheet" type="text/css" href="/packages/fiori/dist/styles/ToolLayout.css">

	<style>
		html {
			height: 100%;
		}
		body {
			margin: 0px;
			height: 100%;
		}
	</style>
</head>

<body>
	<div class="ui5ToolLayout">
		<div class="ui5ToolLayoutHeader ui5ToolLayoutPanelTop">
			header <a id="expandButton" href="#">toggle side</a>
		</div>

		<div class="ui5ToolLayoutBody">
			<aside id="sideBar" class="ui5ToolLayoutSide ui5ToolLayoutPanelSide">
				side expanded
			</aside>

			<div class="ui5ToolLayoutContent ui5ToolLayoutPanelContent">
				content
			</div>
		</div>
	</div>

	<script>
		const expandButton = document.querySelector("#expandButton"),
			sideBar = document.querySelector("#sideBar");

		expandButton.addEventListener("click", function (event) {
			sideBar.classList.toggle("ui5ToolLayoutSideCollapsed");
			sideBar.innerText = sideBar.classList.contains("ui5ToolLayoutSideCollapsed") ? "side" : "side expanded";
			event.preventDefault();
		});


		/* @todo, real phone vs width check with design */
		/* @todo make Devide public if needed */
		/* @todo do we need to auto collapse < 1024 */

		// The following part is made with js instead of css media queries, because this way js knows when the side is collapsed and can have full control on collapsing.
		// With media query logic will be more complex.
		const observer = new ResizeObserver(entries => {
			const width = entries[0].contentRect.width;

			sideBar.classList.toggle("ui5ToolLayoutSideDetached", width < 600);
			sideBar.classList.toggle("ui5ToolLayoutSideCollapsed", width < 1024);

			// for demonstration
			sideBar.innerText = width < 1024 ? "side" : "side expanded";
		});
		observer.observe(document.body);
	</script>
</body>
</html>
